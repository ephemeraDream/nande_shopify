{{ 'section-footer-simple.css' | asset_url | stylesheet_tag }}

<div class="footer_simple_section session-box-padding">
  <div class="footer_simple">
    <div class="footer_simple_body">
      {% for block in section.blocks %}
        {%- case block.type -%}
          {%- when 'company_info' -%}
            <div class="footer_simple_company_info">
              <img src="{{ block.settings.image | image_url }}" class="footer_simple_company_info_logo">
              {% if block.settings.text_one != blank %}
                <a
                  class="footer_simple_company_info_item"
                  {% if block.settings.link_one != blank %}
                    href="{{ block.settings.link_one }}"
                  {% endif %}
                >
                  {{ block.settings.icon_one }}
                  <div>{{ block.settings.text_one }}</div>
                </a>
              {% endif %}
              {% if block.settings.text_two != blank %}
                <a
                  class="footer_simple_company_info_item"
                  {% if block.settings.link_two != blank %}
                    href="{{ block.settings.link_two }}"
                  {% endif %}
                >
                  {{ block.settings.icon_two }}
                  <div>{{ block.settings.text_two }}</div>
                </a>
              {% endif %}
              {% if block.settings.text_thr != blank %}
                <a
                  class="footer_simple_company_info_item"
                  {% if block.settings.link_thr != blank %}
                    href="{{ block.settings.link_thr }}"
                  {% endif %}
                >
                  {{ block.settings.icon_thr }}
                  <div>{{ block.settings.text_thr }}</div>
                </a>
              {% endif %}
            </div>
          {%- when 'link_list' -%}
            <div class="footer_simple_link_list">
              <div class="footer_simple_link_list_title" data-toggle="footer-link-list-{{ forloop.index }}">
                {{ block.settings.heading }}
                <span class="footer_simple_toggle_icon">+</span>
              </div>
              <div class="footer_simple_link_list_items" id="footer-link-list-{{ forloop.index }}">
                {%- if block.settings.menu != blank -%}
                  {%- for link in block.settings.menu.links -%}
                    <a
                      href="{{ link.url }}"
                      class="footer_simple_link_list_item{% if link.active %} footer_simple_link_list_item_active{% endif %}"
                    >
                      {{ link.title | escape }}
                    </a>
                  {%- endfor -%}
                {%- endif -%}
              </div>
            </div>
        {%- endcase -%}
      {% endfor %}
    </div>
    <div class="footer_simple_footer">
      <span>&copy; {{ 'now' | date: '%Y' }}, {{ shop.name | link_to: routes.root_url -}}</span>
      {{ powered_by_link }}
      {%- for policy in shop.policies -%}
        {%- if policy != blank -%}
          <a href="{{ policy.url }}">{{ policy.title | escape }}</a>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</div>

{%- render 'back-to-top', section: section -%}

<script>
document.addEventListener('DOMContentLoaded', function() {
  // 检查是否为移动设备
  function isMobile() {
    return window.innerWidth <= 767;
  }
  
  // 初始化移动端展开/收起功能
  function initMobileToggle() {
    if (!isMobile()) return;
    
    const toggleElements = document.querySelectorAll('[data-toggle^="footer-link-list"]');
    
    toggleElements.forEach(function(toggleElement) {
      const targetId = toggleElement.getAttribute('data-toggle');
      const targetElement = document.getElementById(targetId);
      const iconElement = toggleElement.querySelector('.footer_simple_toggle_icon');
      
      if (targetElement && iconElement) {
        // 初始状态：隐藏链接
        targetElement.style.display = 'none';
        
        // 添加点击事件
        toggleElement.addEventListener('click', function() {
          if (targetElement.style.display === 'none') {
            // 展开
            targetElement.style.display = 'block';
            iconElement.textContent = '−';
            iconElement.classList.add('footer_simple_toggle_icon_expanded');
          } else {
            // 收起
            targetElement.style.display = 'none';
            iconElement.textContent = '+';
            iconElement.classList.remove('footer_simple_toggle_icon_expanded');
          }
        });
      }
    });
  }
  
  // 页面加载时初始化
  initMobileToggle();
  
  // 窗口大小改变时重新初始化
  window.addEventListener('resize', function() {
    if (isMobile()) {
      initMobileToggle();
    } else {
      // 桌面端恢复默认显示
      const linkItems = document.querySelectorAll('.footer_simple_link_list_items');
      const icons = document.querySelectorAll('.footer_simple_toggle_icon');
      
      linkItems.forEach(function(item) {
        item.style.display = 'block';
      });
      
      icons.forEach(function(icon) {
        icon.textContent = '+';
        icon.classList.remove('footer_simple_toggle_icon_expanded');
      });
    }
  });
});
</script>

{% schema %}
{
  "name": "footer simple",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header"],
    "templates": ["*"]
  },
  "blocks": [
    {
      "type": "company_info",
      "name": "company info",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "logo"
        },
        {
          "type": "textarea",
          "id": "icon_one",
          "label": "icon one"
        },
        {
          "type": "richtext",
          "id": "text_one",
          "label": "text one"
        },
        {
          "type": "url",
          "id": "link_one",
          "label": "link one"
        },
        {
          "type": "textarea",
          "id": "icon_two",
          "label": "icon two"
        },
        {
          "type": "richtext",
          "id": "text_two",
          "label": "text two"
        },
        {
          "type": "url",
          "id": "link_two",
          "label": "link two"
        },
        {
          "type": "textarea",
          "id": "icon_thr",
          "label": "icon thr"
        },
        {
          "type": "richtext",
          "id": "text_thr",
          "label": "text thr"
        },
        {
          "type": "url",
          "id": "link_thr",
          "label": "link thr"
        }
      ]
    },
    {
      "type": "link_list",
      "name": "link list",
      "settings": [
        {
          "type": "richtext",
          "id": "heading",
          "label": "heading"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "menu"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "回到顶部设置"
    },
    {
      "type": "checkbox",
      "id": "show_back_to_top",
      "label": "显示回到顶部按钮",
      "default": true
    },
    {
      "type": "select",
      "id": "position_type",
      "label": "位置设置方式",
      "options": [
        {
          "value": "preset",
          "label": "预设位置"
        },
        {
          "value": "custom",
          "label": "自定义位置"
        }
      ],
      "default": "preset"
    },
    {
      "type": "select",
      "id": "position",
      "label": "预设位置",
      "options": [
        {
          "value": "bottom-right",
          "label": "右下角"
        },
        {
          "value": "bottom-left",
          "label": "左下角"
        },
        {
          "value": "bottom-center",
          "label": "底部居中"
        },
        {
          "value": "top-right",
          "label": "右上角"
        },
        {
          "value": "top-left",
          "label": "左上角"
        },
        {
          "value": "top-center",
          "label": "顶部居中"
        }
      ],
      "default": "bottom-right"
    },
    {
      "type": "header",
      "content": "自定义位置设置"
    },
    {
      "type": "select",
      "id": "position_vertical",
      "label": "垂直位置",
      "options": [
        {
          "value": "top",
          "label": "距离顶部"
        },
        {
          "value": "bottom",
          "label": "距离底部"
        }
      ],
      "default": "bottom"
    },
    {
      "type": "number",
      "id": "position_top",
      "label": "距离顶部 (px)",
      "default": 20
    },
    {
      "type": "number",
      "id": "position_bottom",
      "label": "距离底部 (px)",
      "default": 20
    },
    {
      "type": "select",
      "id": "position_horizontal",
      "label": "水平位置",
      "options": [
        {
          "value": "left",
          "label": "距离左边"
        },
        {
          "value": "right",
          "label": "距离右边"
        },
        {
          "value": "center",
          "label": "水平居中"
        }
      ],
      "default": "right"
    },
    {
      "type": "number",
      "id": "position_left",
      "label": "距离左边 (px)",
      "default": 20
    },
    {
      "type": "number",
      "id": "position_right",
      "label": "距离右边 (px)",
      "default": 20
    },
    {
      "type": "header",
      "content": "移动端位置设置"
    },
    {
      "type": "number",
      "id": "position_top_mobile",
      "label": "移动端距离顶部 (px)",
      "info": "留空则使用桌面端设置"
    },
    {
      "type": "number",
      "id": "position_bottom_mobile",
      "label": "移动端距离底部 (px)",
      "info": "留空则使用桌面端设置"
    },
    {
      "type": "number",
      "id": "position_left_mobile",
      "label": "移动端距离左边 (px)",
      "info": "留空则使用桌面端设置"
    },
    {
      "type": "number",
      "id": "position_right_mobile",
      "label": "移动端距离右边 (px)",
      "info": "留空则使用桌面端设置"
    },
    {
      "type": "range",
      "id": "scroll_threshold",
      "min": 100,
      "max": 1000,
      "step": 50,
      "unit": "px",
      "label": "显示按钮的滚动距离",
      "default": 300
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "按钮背景色",
      "default": "#BDFF00"
    },
    {
      "type": "color",
      "id": "hover_background_color",
      "label": "按钮悬停背景色",
      "default": "#8ebe09"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "图标颜色",
      "default": "#1F1F1F"
    },
    {
      "type": "textarea",
      "id": "custom_icon",
      "label": "自定义图标 (SVG代码)",
      "info": "留空则使用默认的向上箭头图标"
    }
  ],
  "presets": [
    {
      "name": "footer simple"
    }
  ]
}
{% endschema %}
