{{ 'section-footer-simple.css' | asset_url | stylesheet_tag }}

<div class="footer_simple_section session-box-padding">
  <div class="footer_simple">
    <div class="footer_simple_body">
      {% for block in section.blocks %}
        {%- case block.type -%}
          {%- when 'company_info' -%}
            <div class="footer_simple_company_info">
              <img src="{{ block.settings.image | image_url }}" class="footer_simple_company_info_logo">
              {% if block.settings.text_one != blank %}
                <a
                  class="footer_simple_company_info_item"
                  {% if block.settings.link_one != blank %}
                    href="{{ block.settings.link_one }}"
                  {% endif %}
                >
                  {{ block.settings.icon_one }}
                  <div>{{ block.settings.text_one }}</div>
                </a>
              {% endif %}
              {% if block.settings.text_two != blank %}
                <a
                  class="footer_simple_company_info_item"
                  {% if block.settings.link_two != blank %}
                    href="{{ block.settings.link_two }}"
                  {% endif %}
                >
                  {{ block.settings.icon_two }}
                  <div>{{ block.settings.text_two }}</div>
                </a>
              {% endif %}
              {% if block.settings.text_thr != blank %}
                <a
                  class="footer_simple_company_info_item"
                  {% if block.settings.link_thr != blank %}
                    href="{{ block.settings.link_thr }}"
                  {% endif %}
                >
                  {{ block.settings.icon_thr }}
                  <div>{{ block.settings.text_thr }}</div>
                </a>
              {% endif %}
            </div>
          {%- when 'link_list' -%}
            <div class="footer_simple_link_list">
              <div class="footer_simple_link_list_title" data-toggle="footer-link-list-{{ forloop.index }}">
                {{ block.settings.heading }}
                <span class="footer_simple_toggle_icon">+</span>
              </div>
              <div class="footer_simple_link_list_items" id="footer-link-list-{{ forloop.index }}">
                {%- if block.settings.menu != blank -%}
                  {%- for link in block.settings.menu.links -%}
                    <a
                      href="{{ link.url }}"
                      class="footer_simple_link_list_item{% if link.active %} footer_simple_link_list_item_active{% endif %}"
                    >
                      {{ link.title | escape }}
                    </a>
                  {%- endfor -%}
                {%- endif -%}
              </div>
            </div>
        {%- endcase -%}
      {% endfor %}
    </div>
    <div class="product_info_payment_contain">
      {%- for type in shop.enabled_payment_types -%}
        {{ type | payment_type_svg_tag }}
      {%- endfor -%}
      <svg width="39" height="17" viewBox="0 0 39 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_2409_70931)">
        <path d="M0 8.33307C0 5.07769 0 3.44999 0.798673 2.29077C1.11119 1.83717 1.50391 1.44444 1.95751 1.13193C3.11674 0.333252 4.74443 0.333252 7.99982 0.333252H30.023C33.2782 0.333252 34.906 0.333252 36.0652 1.13193C36.5189 1.44444 36.9117 1.83717 37.224 2.29077C38.0227 3.44999 38.0227 5.07769 38.0227 8.33307C38.0227 11.5885 38.0227 13.2162 37.224 14.3754C36.9117 14.829 36.5189 15.2217 36.0652 15.5342C34.906 16.3329 33.2782 16.3329 30.023 16.3329H7.99984C4.74443 16.3329 3.11674 16.3329 1.95751 15.5342C1.50391 15.2217 1.11119 14.829 0.798673 14.3754C0 13.2162 0 11.5885 0 8.33307Z" fill="#FFA8CD"/>
        <path d="M30.6408 10.5535C29.9774 10.5535 29.4603 10.0049 29.4603 9.33877C29.4603 8.67263 29.9774 8.12405 30.6408 8.12405C31.3042 8.12405 31.8212 8.67263 31.8212 9.33877C31.8212 10.0049 31.3042 10.5535 30.6408 10.5535ZM30.3089 11.8367C30.8749 11.8367 31.5968 11.6212 31.997 10.7788L32.0358 10.7984C31.8603 11.2588 31.8603 11.5331 31.8603 11.6017V11.7094H33.2846V6.96811H31.8603V7.07588C31.8603 7.14446 31.8603 7.41874 32.0358 7.87914L31.997 7.89874C31.5968 7.05628 30.8749 6.84077 30.3089 6.84077C28.953 6.84077 27.997 7.91834 27.997 9.33877C27.997 10.7592 28.953 11.8367 30.3089 11.8367ZM25.5188 6.84077C24.8749 6.84077 24.3676 7.06608 23.9578 7.89874L23.9188 7.87914C24.0944 7.41874 24.0944 7.14446 24.0944 7.07588V6.96811H22.67V11.7094H24.1334V9.2114C24.1334 8.55508 24.514 8.14363 25.1286 8.14363C25.7432 8.14363 26.0456 8.49628 26.0456 9.2016V11.7094H27.5091V8.69223C27.5091 7.61466 26.6699 6.84077 25.5188 6.84077ZM20.553 7.89874L20.5139 7.87914C20.6895 7.41874 20.6895 7.14446 20.6895 7.07588V6.96811H19.2652V11.7094H20.7286L20.7383 9.42691C20.7383 8.7608 21.0895 8.35914 21.6652 8.35914C21.8212 8.35914 21.9481 8.37874 22.0944 8.41794V6.96811C21.4505 6.83097 20.8749 7.07588 20.553 7.89874ZM15.8993 10.5535C15.2359 10.5535 14.7188 10.0049 14.7188 9.33877C14.7188 8.67263 15.2359 8.12405 15.8993 8.12405C16.5627 8.12405 17.0798 8.67263 17.0798 9.33877C17.0798 10.0049 16.5627 10.5535 15.8993 10.5535ZM15.5676 11.8367C16.1334 11.8367 16.8554 11.6212 17.2554 10.7788L17.2944 10.7984C17.1188 11.2588 17.1188 11.5331 17.1188 11.6017V11.7094H18.5432V6.96811H17.1188V7.07588C17.1188 7.14446 17.1188 7.41874 17.2944 7.87914L17.2554 7.89874C16.8554 7.05628 16.1334 6.84077 15.5676 6.84077C14.2115 6.84077 13.2554 7.91834 13.2554 9.33877C13.2554 10.7592 14.2115 11.8367 15.5676 11.8367ZM11.2163 11.7094H12.6798V4.85217H11.2163V11.7094ZM10.1432 4.85217H8.65049C8.65049 6.07669 7.89928 7.17383 6.75781 7.95751L6.30902 8.271V4.85217H4.75781V11.7094H6.30902V8.31017L8.87488 11.7094H10.7676L8.29928 8.45711C9.42122 7.64405 10.1529 6.38034 10.1432 4.85217Z" fill="#0B051D"/>
        </g>
        <defs>
        <clipPath id="clip0_2409_70931">
        <rect width="38.0427" height="16" fill="white" transform="translate(0 0.333252)"/>
        </clipPath>
        </defs>
      </svg>
    </div>
    <div class="footer_simple_footer">
      <span>&copy; {{ 'now' | date: '%Y' }}, {{ shop.name | link_to: routes.root_url -}}</span>
      {{ powered_by_link }}
      {%- for policy in shop.policies -%}
        {%- if policy != blank -%}
          <a href="{{ policy.url }}">{{ policy.title | escape }}</a>
        {%- endif -%}
      {%- endfor -%}
    </div>
  </div>
</div>

{%- render 'back-to-top', section: section -%}

<style>
  .footer_simple_section .product_info_payment_contain {
    margin-top: 2rem;
    display: flex;
    justify-content: center;
    gap: 0.3rem;
  }
  .footer_simple_section .product_info_payment_contain svg {
    height: 2rem;
    width: auto;
  }
</style>


<script>
(function() {
  'use strict';
  
  // 检查是否为移动设备
  function isMobile() {
    return window.innerWidth <= 767;
  }
  
  // 防抖函数
  function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }
  
  // 初始化移动端展开/收起功能
  function initMobileToggle() {
    // 清除之前的事件监听器
    const toggleElements = document.querySelectorAll('[data-toggle^="footer-link-list"]');
    
    toggleElements.forEach(function(toggleElement) {
      // 移除之前的事件监听器
      const newToggleElement = toggleElement.cloneNode(true);
      toggleElement.parentNode.replaceChild(newToggleElement, toggleElement);
    });
    
    // 重新获取元素并绑定事件
    const freshToggleElements = document.querySelectorAll('[data-toggle^="footer-link-list"]');
    
    freshToggleElements.forEach(function(toggleElement) {
      const targetId = toggleElement.getAttribute('data-toggle');
      const targetElement = document.getElementById(targetId);
      const iconElement = toggleElement.querySelector('.footer_simple_toggle_icon');
      
      if (targetElement && iconElement) {
        // 设置初始状态
        if (isMobile()) {
          targetElement.style.display = 'none';
          iconElement.textContent = '+';
          iconElement.classList.remove('footer_simple_toggle_icon_expanded');
        } else {
          targetElement.style.display = 'block';
        }
        
        // 添加点击事件 - 使用事件委托
        toggleElement.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          if (!isMobile()) return;
          
          const isHidden = targetElement.style.display === 'none';
          
          if (isHidden) {
            // 展开
            targetElement.style.display = 'block';
            iconElement.textContent = '−';
            iconElement.classList.add('footer_simple_toggle_icon_expanded');
          } else {
            // 收起
            targetElement.style.display = 'none';
            iconElement.textContent = '+';
            iconElement.classList.remove('footer_simple_toggle_icon_expanded');
          }
        }, { passive: false });
        
        // 添加触摸事件支持
        toggleElement.addEventListener('touchstart', function(e) {
          e.preventDefault();
        }, { passive: false });
      }
    });
  }
  
  // 重置为桌面端状态
  function resetToDesktop() {
    const linkItems = document.querySelectorAll('.footer_simple_link_list_items');
    const icons = document.querySelectorAll('.footer_simple_toggle_icon');
    
    linkItems.forEach(function(item) {
      item.style.display = 'block';
    });
    
    icons.forEach(function(icon) {
      icon.textContent = '+';
      icon.classList.remove('footer_simple_toggle_icon_expanded');
    });
  }
  
  // 防抖的resize处理函数
  const debouncedResize = debounce(function() {
    if (isMobile()) {
      initMobileToggle();
    } else {
      resetToDesktop();
    }
  }, 150);
  
  // 页面加载完成后初始化
  function initializeFooter() {
    // 等待DOM完全加载
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(initMobileToggle, 100);
      });
    } else {
      setTimeout(initMobileToggle, 100);
    }
  }
  
  // 初始化
  initializeFooter();
  
  // 窗口大小改变时重新初始化
  window.addEventListener('resize', debouncedResize);
  
  // 页面可见性改变时重新初始化（处理移动端浏览器切换）
  document.addEventListener('visibilitychange', function() {
    if (!document.hidden) {
      setTimeout(function() {
        if (isMobile()) {
          initMobileToggle();
        } else {
          resetToDesktop();
        }
      }, 100);
    }
  });
})();
</script>

{% schema %}
{
  "name": "footer simple",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header"],
    "templates": ["*"]
  },
  "blocks": [
    {
      "type": "company_info",
      "name": "company info",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "logo"
        },
        {
          "type": "textarea",
          "id": "icon_one",
          "label": "icon one"
        },
        {
          "type": "richtext",
          "id": "text_one",
          "label": "text one"
        },
        {
          "type": "url",
          "id": "link_one",
          "label": "link one"
        },
        {
          "type": "textarea",
          "id": "icon_two",
          "label": "icon two"
        },
        {
          "type": "richtext",
          "id": "text_two",
          "label": "text two"
        },
        {
          "type": "url",
          "id": "link_two",
          "label": "link two"
        },
        {
          "type": "textarea",
          "id": "icon_thr",
          "label": "icon thr"
        },
        {
          "type": "richtext",
          "id": "text_thr",
          "label": "text thr"
        },
        {
          "type": "url",
          "id": "link_thr",
          "label": "link thr"
        }
      ]
    },
    {
      "type": "link_list",
      "name": "link list",
      "settings": [
        {
          "type": "richtext",
          "id": "heading",
          "label": "heading"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "menu"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "回到顶部设置"
    },
    {
      "type": "checkbox",
      "id": "show_back_to_top",
      "label": "显示回到顶部按钮",
      "default": true
    },
    {
      "type": "select",
      "id": "position_type",
      "label": "位置设置方式",
      "options": [
        {
          "value": "preset",
          "label": "预设位置"
        },
        {
          "value": "custom",
          "label": "自定义位置"
        }
      ],
      "default": "preset"
    },
    {
      "type": "select",
      "id": "position",
      "label": "预设位置",
      "options": [
        {
          "value": "bottom-right",
          "label": "右下角"
        },
        {
          "value": "bottom-left",
          "label": "左下角"
        },
        {
          "value": "bottom-center",
          "label": "底部居中"
        },
        {
          "value": "top-right",
          "label": "右上角"
        },
        {
          "value": "top-left",
          "label": "左上角"
        },
        {
          "value": "top-center",
          "label": "顶部居中"
        }
      ],
      "default": "bottom-right"
    },
    {
      "type": "header",
      "content": "自定义位置设置"
    },
    {
      "type": "select",
      "id": "position_vertical",
      "label": "垂直位置",
      "options": [
        {
          "value": "top",
          "label": "距离顶部"
        },
        {
          "value": "bottom",
          "label": "距离底部"
        }
      ],
      "default": "bottom"
    },
    {
      "type": "number",
      "id": "position_top",
      "label": "距离顶部 (px)",
      "default": 20
    },
    {
      "type": "number",
      "id": "position_bottom",
      "label": "距离底部 (px)",
      "default": 20
    },
    {
      "type": "select",
      "id": "position_horizontal",
      "label": "水平位置",
      "options": [
        {
          "value": "left",
          "label": "距离左边"
        },
        {
          "value": "right",
          "label": "距离右边"
        },
        {
          "value": "center",
          "label": "水平居中"
        }
      ],
      "default": "right"
    },
    {
      "type": "number",
      "id": "position_left",
      "label": "距离左边 (px)",
      "default": 20
    },
    {
      "type": "number",
      "id": "position_right",
      "label": "距离右边 (px)",
      "default": 20
    },
    {
      "type": "header",
      "content": "移动端位置设置"
    },
    {
      "type": "number",
      "id": "position_top_mobile",
      "label": "移动端距离顶部 (px)",
      "info": "留空则使用桌面端设置"
    },
    {
      "type": "number",
      "id": "position_bottom_mobile",
      "label": "移动端距离底部 (px)",
      "info": "留空则使用桌面端设置"
    },
    {
      "type": "number",
      "id": "position_left_mobile",
      "label": "移动端距离左边 (px)",
      "info": "留空则使用桌面端设置"
    },
    {
      "type": "number",
      "id": "position_right_mobile",
      "label": "移动端距离右边 (px)",
      "info": "留空则使用桌面端设置"
    },
    {
      "type": "range",
      "id": "scroll_threshold",
      "min": 100,
      "max": 1000,
      "step": 50,
      "unit": "px",
      "label": "显示按钮的滚动距离",
      "default": 300
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "按钮背景色",
      "default": "#BDFF00"
    },
    {
      "type": "color",
      "id": "hover_background_color",
      "label": "按钮悬停背景色",
      "default": "#8ebe09"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "图标颜色",
      "default": "#1F1F1F"
    },
    {
      "type": "textarea",
      "id": "custom_icon",
      "label": "自定义图标 (SVG代码)",
      "info": "留空则使用默认的向上箭头图标"
    }
  ],
  "presets": [
    {
      "name": "footer simple"
    }
  ]
}
{% endschema %}
