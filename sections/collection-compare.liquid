<!-- ===============================
     Collection Coupon Module
     =============================== -->
<div class="collection-coupon-slim" style="
  margin-top:18px;
  padding:16px 18px;
  background:#fafafa;
  border:1px solid #e5e5e5;
  border-radius:10px;
  overflow:visible;
">

  <!-- Header (INLINE 强制显示) -->
  <div style="
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:14px;
    gap:10px;
    overflow:visible;
  ">
    <span style="
      display:inline-block;
      font-size:18px;
      font-weight:700;
      line-height:1.3;
      color:#111;
      visibility:visible;
      opacity:1;
    ">
      Buy More, Save More
    </span>

    <span style="
      display:inline-block;
      font-size:13px;
      line-height:1.3;
      color:#111;
      visibility:visible;
      opacity:1;
      white-space:nowrap;
    ">
      Ends in
      <span id="coupon-timer" style="
        font-weight:700;
        margin-left:4px;
        font-variant-numeric:tabular-nums;
      ">00:00:00</span>
    </span>
  </div>

  <!-- Coupons -->
  <div style="display:flex;gap:14px;flex-wrap:wrap;">

    <div style="flex:1 1 30%;min-width:180px;background:#fff;border:1px solid #ddd;border-radius:6px;padding:12px;">
      <div style="font-size:15px;font-weight:700;margin-bottom:4px;">40 € Off</div>
      <div style="font-size:12px;color:#666;margin-bottom:10px;">ab 499 € Einkaufswert</div>
      <div style="display:flex;gap:8px;align-items:center;background:#000;padding:6px;border-radius:6px;">
        <input id="cp40" value="MD40" readonly style="max-width:90px;padding:4px 8px;font-size:12px;border-radius:4px;border:1px solid #ccc;">
        <button onclick="copyCoupon('cp40', this)" style="height:32px;padding:0 10px;font-size:11px;font-weight:700;border:none;border-radius:4px;background:#bdff00;color:#000;cursor:pointer;">
          Copy
        </button>
      </div>
    </div>

    <div style="flex:1 1 30%;min-width:180px;background:#fff;border:1px solid #ddd;border-radius:6px;padding:12px;">
      <div style="font-size:15px;font-weight:700;margin-bottom:4px;">120 € Off</div>
      <div style="font-size:12px;color:#666;margin-bottom:10px;">ab 999 € Einkaufswert</div>
      <div style="display:flex;gap:8px;align-items:center;background:#000;padding:6px;border-radius:6px;">
        <input id="cp120" value="MD120" readonly style="max-width:90px;padding:4px 8px;font-size:12px;border-radius:4px;border:1px solid #ccc;">
        <button onclick="copyCoupon('cp120', this)" style="height:32px;padding:0 10px;font-size:11px;font-weight:700;border:none;border-radius:4px;background:#bdff00;color:#000;cursor:pointer;">
          Copy
        </button>
      </div>
    </div>

    <div style="flex:1 1 30%;min-width:180px;background:#fff;border:1px solid #ddd;border-radius:6px;padding:12px;">
      <div style="font-size:15px;font-weight:700;margin-bottom:4px;">250 € Off</div>
      <div style="font-size:12px;color:#666;margin-bottom:10px;">ab 1999 € Einkaufswert</div>
      <div style="display:flex;gap:8px;align-items:center;background:#000;padding:6px;border-radius:6px;">
        <input id="cp250" value="MD250" readonly style="max-width:90px;padding:4px 8px;font-size:12px;border-radius:4px;border:1px solid #ccc;">
        <button onclick="copyCoupon('cp250', this)" style="height:32px;padding:0 10px;font-size:11px;font-weight:700;border:none;border-radius:4px;background:#bdff00;color:#000;cursor:pointer;">
          Copy
        </button>
      </div>
    </div>

  </div>
</div>

<script>
/* Copy */
function copyCoupon(id, btn) {
  const i = document.getElementById(id);
  i.select(); i.setSelectionRange(0,99999);
  document.execCommand('copy');
  const t = btn.innerText;
  btn.innerText = '✔ Copied';
  setTimeout(()=>btn.innerText=t,2000);
}

/* 3-day loop countdown */
(function(){
  const KEY='coupon_cycle';
  const D=3*24*60*60*1000;
  const GAP=5*60*1000;
  const el=document.getElementById('coupon-timer');
  if(!el) return;
  let s=localStorage.getItem(KEY);
  if(!s){s=Date.now();localStorage.setItem(KEY,s);}
  s=parseInt(s,10);
  setInterval(()=>{
    const n=Date.now();
    let r=D-(n-s);
    if(r<=0){
      if(n-s>=D+GAP){s=Date.now();localStorage.setItem(KEY,s);r=D;}
      else{el.textContent='00:00:00';return;}
    }
    const h=Math.floor(r/3600000);
    const m=Math.floor((r%3600000)/60000);
    const sec=Math.floor((r%60000)/1000);
    el.textContent=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
  },1000);
})();
</script>
